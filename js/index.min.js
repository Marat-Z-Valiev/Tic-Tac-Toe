const selectX=$("#select-X"),selectO=$("#select-O"),resetButton=$("#reset"),gameBoard=$(".game-board"),cells=$(".board-cell"),endGame=$(".end-game");let human="",ai="",board=["","","","","","","","",""],turns=0,aiArr=[],humanArr=[];function reset(){turns=0,board=["","","","","","","","",""],gameBoard.css("visibility","hidden"),selectX.fadeTo("slow",1),selectO.fadeTo("slow",1),resetButton.fadeTo("slow",0),endGame.hide(),cells.html(""),cells.css({"pointer-events":"auto",background:"none"}),aiArr=[],humanArr=[]}function move(e,t){""==e[t]&&(turns++,e[t]=human)}function status(e){if(win(e,human))return cells.css("pointer-events","none"),void setTimeout(function(){$(".win").show(),3===humanArr.length?$(`${humanArr[0]},${humanArr[1]},${humanArr[2]}`).css("background","#0edf07"):$(`${humanArr[1]},${humanArr[2]},${humanArr[3]}`).css("background","#0edf07")},600);if(9==turns)draw();else{turns++,strategy(),empty=[],e[bestMove]=ai;let t="#"+bestMove;if(setTimeout(function(){$(t).html(`<div class="content">${ai}</div>`),aiArr.push(t)},700),win(e,ai))return cells.css("pointer-events","none"),void setTimeout(function(){$(".lose").show(),3===aiArr.length?$(`${aiArr[0]},${aiArr[1]},${aiArr[2]}`).css("background","#f82904"):$(`${aiArr[0]},${aiArr[2]},${aiArr[3]}`).css("background","#f82904")},800);9==turns&&(cells.css("pointer-events","none"),setTimeout(function(){$(".draw").show()},800))}}function draw(){$(".draw").show(),setTimeout(function(){},3e3)}$(function(){selectX.click(function(){selectX.fadeTo("slow",0),selectO.fadeTo("slow",0),resetButton.fadeTo("slow",1),gameBoard.css("visibility","visible"),human="X",ai="O"}),selectO.click(function(){selectX.fadeTo("slow",0),selectO.fadeTo("slow",0),resetButton.fadeTo("slow",1),gameBoard.css("visibility","visible"),human="O",ai="X"}),cells.on("click",function(){""===$(this).html()&&(selection=parseInt($(this).attr("id")),humanArr.push("#"+selection),move(board,selection),$(this).html(`<div class='content'>${board[selection]}</div>`),status(board))})}),resetButton.click(function(){reset()});let empty=[],bestMove="";function strategy(){for(let e=0;e<board.length;e++)""===board[e]&&empty.push(e);return!0===checkWin(empty)?bestMove:!0===checkLose(empty)?bestMove:bestMove=""===board[4]?4:""===board[0]?0:""===board[2]?2:""===board[6]?6:""===board[8]?8:empty[0]}function checkWin(e){for(let t=0;t<e.length;t++){if(board[e[t]]=ai,win(board,ai))return bestMove=e[t],board[e[t]]="",!0;board[e[t]]=""}}function checkLose(e){for(let t=0;t<e.length;t++){if(board[e[t]]=human,win(board,human))return bestMove=e[t],board[e[t]]="",!0;board[e[t]]=""}}function win(e,t){if(e[0]==t&&e[1]==t&&e[2]==t||e[3]==t&&e[4]==t&&e[5]==t||e[6]==t&&e[7]==t&&e[8]==t||e[0]==t&&e[3]==t&&e[6]==t||e[1]==t&&e[4]==t&&e[7]==t||e[2]==t&&e[5]==t&&e[8]==t||e[0]==t&&e[4]==t&&e[8]==t||e[2]==t&&e[4]==t&&e[6]==t)return!0}